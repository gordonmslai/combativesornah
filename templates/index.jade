{% load staticfiles %}
doctype html
html(lang='en')
    head
        title Combatives Or Nah?
        link(rel='stylesheet', href='{% static "css/global.css" %}', type='text/css')
        script.
            function display_c() {
                var refresh=1000;
                mytime=setTimeout('display_ct()', refresh);
            }

            function display_c1(start) {
                window.start = parseFloat(start);
                var end = 0;
                var refresh = 1000;
                if (window.start >= end) {
                    mytime=setTimeout('display_ct1()', refresh);
                }
                else {
                    location.reload();
                }
            }
            function display_ct() {
                var strcount;
                var a = new Date();
                var x = a.toDateString();
                document.getElementById("ct").innerHTML = "<h3>" + x;
                tt=display_c();
            }
            
            function display_ct1() {
                var hours = Math.floor(window.start / 3600);
                var minutes = Math.floor((window.start - (hours *3600 ))/60);
                var seconds = Math.floor((window.start - (hours *3600) - (minutes * 60)));

                var tr = String(minutes) + " minutes " + String(seconds) + " seconds";
                if (hours != 0) {
                    tr = String(hours) + " hours " + tr;
                }

                document.getElementById("curr_remain").innerHTML = "Time remaining: " + String(tr); 
                window.start= window.start- 1;
                tt1=display_c1(window.start);
            }

            function time_stuff() {
                display_ct();
                display_c1({{curr.time_left_sec}});
            }
    body(onload = "time_stuff();")
        #bg
            #bi
        #container
            #backcont
            spac#ct
            #title
                h3 Combatives Or Nah?
            #ornah
                if curr.reserved
                    #nah
                        h1 ...............Nah............... :(
                else
                    #yes
                        #yes_str
                            h1 YAAAAAAAAAAAAAAAAAS. :)
            #main
                #mainholder
                    #title_curr
                        b Currently..
                    #curr_name {{ curr.name }}
                    #curr_remain
            br
            #upcoming
                #uptitles
                    #title2
                        b Up next...
                    #upclasses
                        u Classes
                    #upduration
                        u Duration 
                #upholder
                    for class in curr_list
                        script.
                            var e0 = document.createElement("fblock");
                            e0.id = "{{ class.web_str}}{{class.name}}{{class.time_til}}";

                            var bool = "{{class.reserved}}";
                            var x = "False";
                            if (bool == x) {
                                var op = {{class.duration}} / 80;
                                e0.style.backgroundColor = "rgba(0, 200, 0," + String(op) + ")";
                            }
                            document.getElementById("upholder").appendChild(e0);

                            var e = document.createElement("fblock_main");
                            e.id = "{{ class.web_str }}{{class.time_til}}";
                            e.innerHTML = "<i>{{ class.name }}<i/><br/>
                                {{ class.startend_str }}";
                            document.getElementById("{{ class.web_str}}{{class.name}}{{class.time_til}}").appendChild(e);
                            
                            var e2 = document.createElement("fblock_d");
                            e2.id = "{{ class.web_str }}{{class.time_til}}2";
                            e2.innerHTML = "{{ class.dur_str }}";
                            e2.style.position = "absolute";
                            e2.style.right = "6px";
                            document.getElementById("{{ class.web_str }}{{class.time_til}}").appendChild(e2);

                #endnotes
                    a(href = "http://recsports.berkeley.edu/fitness-wellness/group-exercise/weekly-schedule/")
                        p Link to full RSF Group X Weekly Schedule
                    br
                    | Current factored classes: 
                    | Cal Fencing, Archery Club, Calstar Yoga Decal, All RSF Group X Classes 
                    br
                    | Please email gordonmslai@gmail.com for bugs/class additions/etc. Thank you!
